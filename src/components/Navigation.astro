---
import { Clapperboard, Disc3, type Props, Info, Layers, Tv } from "lucide-astro";

import { cn } from "~/utils/cn";
import { GlobalSearch } from "~/components/GlobalSearch";

const currentPath = Astro.url.pathname;

const navItems = [
	{ href: '/movies', label: 'Movies', icon: Clapperboard },
	{ href: '/series', label: 'TV Series', icon: Tv },
	{ href: '/boxsets', label: 'Boxsets', icon: Layers },
	{ href: '/about', label: 'About', icon: Info, },
] satisfies Array<{
	href: string;
	label: string;
	icon: (_props: Props) => any;
}>

const isActive = (href: string) => currentPath.startsWith(href);
---

<nav class="border-b border-zinc-200 dark:border-zinc-800">
	<div class="max-w-7xl mx-auto px-4 2xl:px-0">
		<div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 py-3 sm:py-0 sm:h-16">
			<div class="flex items-center justify-between sm:gap-4">
				<a class="inline-flex items-center gap-1.5 sm:gap-2 rounded-md text-base sm:text-xl font-bold default-focus default-transition" href="/">
					<Disc3 size={20} class="sm:w-6 sm:h-6" />
					<span class="hidden xs:inline sm:inline">TheDiscDB</span>
				</a>

				<div class="flex gap-1 sm:gap-2 sm:order-3">
					{navItems.map((item) => {
						const active = isActive(item.href);

						return (
							<a
								class={cn(
							"inline-flex items-center justify-center gap-1.5 sm:gap-2 px-2 sm:px-4 py-1.5 text-sm border rounded-md default-transition default-focus",
									active
										? "border-zinc-200 hover:border-zinc-300 dark:border-zinc-800 dark:hover:border-zinc-700 bg-zinc-100 hover:bg-zinc-200 dark:bg-zinc-900 dark:hover:bg-zinc-800 text-zinc-900 hover:text-zinc-800 dark:text-zinc-100 dark:hover:text-zinc-200"
										: "border-transparent hover:border-zinc-200 dark:hover:border-zinc-800 text-zinc-600 hover:text-zinc-800 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-900 dark:hover:text-white"
								)}
								href={item.href}
							>
								<item.icon size={16} class="sm:w-3.5 sm:h-3.5" />
								<span class={cn(active ? "inline" : "hidden sm:inline")}>
									{item.label}
								</span>
							</a>
						)
					})}
				</div>
			</div>

			<GlobalSearch client:load />
		</div>
	</div>
</nav>
